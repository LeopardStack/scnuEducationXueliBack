<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scnujxjy.backendpoint.dao.mapper.core_data.TeacherInformationMapper">
    <sql id="commonJoin">
        FROM teacher_information ti
    </sql>

    <sql id="commonFilters">
        <if test='entity.id != null'>
            AND ti.id = #{entity.id}
        </if>
        <if test='entity.username != null'>
            AND ti.teacher_username = #{entity.username}
        </if>
        <if test='entity.name != null'>
            AND ti.name = #{entity.name}
        </if>
        <if test='entity.idNumber != null'>
            AND ti.id_card_number = #{entity.idNumber}
        </if>
        <if test='entity.workNumber != null'>
            AND ti.work_number = #{entity.workNumber}
        </if>

        <if test="entity.usernames != null and !entity.usernames.isEmpty()">
            AND ti.teacher_username IN
            <foreach collection="entity.usernames" item="username" open="(" separator="," close=")">
                #{username}
            </foreach>
        </if>
    </sql>
    <select id="selectTeacherInfo"
            resultType="com.scnujxjy.backendpoint.dao.entity.core_data.TeacherInformationPO">
        SELECT ti.*
        <include refid="commonJoin" />
        WHERE 1=1
        <include refid="commonFilters" />
    </select>
</mapper>